{"version":3,"sources":["webpack:///../templates/resultList.hbs","webpack:///./apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","query","searchImage","q","page","perPage","fetch","baseUrl","headers","Accept","then","response","ok","status","json","Error","queryInput","document","querySelector","loadMore","result","gallery","lightbox","lightboxOverlay","lightboxImage","lightboxCloseBtn","resultArray","showResults","console","log","hits","concat","innerHTML","resultList","length","classList","add","closeModal","window","removeEventListener","onModalCloseByEsc","remove","removeAttribute","event","code","addEventListener","debounce","e","target","value","trim","API","setTimeout","scrollTo","top","body","scrollHeight","left","behavior","imageSrc","preventDefault","nodeName","onModalOpen","getAttribute","setAttribute"],"mappings":"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","file":"main.2e5b40b46a9348f106c0.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"search-result-item\\\">\\n  <div>\\n    <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":13},\"end\":{\"line\":4,\"column\":29}}}) : helper)))\n    + \" class=\\\"search-result-img\\\" alt=\\\"\\\">\\n\\n    <div class=\\\"stats\\\">\\n        <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":8},\"end\":{\"line\":9,\"column\":17}}}) : helper)))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">visibility</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":8},\"end\":{\"line\":13,\"column\":17}}}) : helper)))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">comment</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":8},\"end\":{\"line\":17,\"column\":20}}}) : helper)))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":8},\"end\":{\"line\":21,\"column\":21}}}) : helper)))\n    + \"\\n        </p>\\n    </div>\\n  </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const key = '19458031-d9248aeea24cd8260c83c18d5'\nconst baseUrl = 'https://pixabay.com/api/'\n\nconst DEFAULT_PER_PAGE = 12;\n\nfunction searchImage(q, page, perPage) {\n\tif (!page)\n\t\tpage = 1;\n\tif (!perPage)\n\t\tperPage = DEFAULT_PER_PAGE;\n\n\tlet url = `${baseUrl}?key=${key}&q=${q}&page=${page}&per_page=${perPage}`\n\treturn fetch(url, {\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t},\n\t\t}).then(response => {\n\t\tif (response.ok || response.status === 404) \n\t\t\treturn response.json();\n\t\tthrow new Error('Error fetching data');\n\t})\n}\n\n\nexport default { searchImage }","import './styles.css'\nimport API from './apiService'\nimport { debounce } from 'lodash'\nimport resultList from '../templates/resultList.hbs'\n\nconst queryInput = document.querySelector('.search-query')\nconst loadMore = document.querySelector(\".load-more\")\nconst result = document.querySelector('.search-result')\n\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = document.querySelector(\".js-lightbox\");\nconst lightboxOverlay = document.querySelector(\".lightbox__overlay\");\nconst lightboxImage = document.querySelector(\".lightbox__image\");\nconst lightboxCloseBtn = document.querySelector('[data-action=\"close-lightbox\"]');\n\nvar page = 1;\nvar resultArray = [];\nvar query;\n\nqueryInput.addEventListener('input', debounce(e => {\n\tquery = e.target.value.trim()\n\tresultArray = [];\n\tpage = 1;\n\tAPI.searchImage(query, page).then(showResults)\n}, 1000))\n\nloadMore.addEventListener('click', e => {\n\tpage += 1;\n\tAPI.searchImage(query, page).then(showResults)\n\t\n\tsetTimeout(() => {\n\t\twindow.scrollTo({\n\t\t\ttop: document.body.scrollHeight,\n\t\t\tleft: 0,\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}, 1000);\n});\n\ngallery.addEventListener(\"click\", (e) => {\n\te.preventDefault();\n\tonModalOpen(e);\n\tcopyGalleryAttributesToLightbox(e);\n  });\n  lightbox.addEventListener(\"click\", onModalClose);\n\n\nfunction showResults(response) {\n\tconsole.log(response.hits)\n\tresultArray = resultArray.concat(response.hits);\n\tconsole.log(resultArray)\n\tresult.innerHTML = resultList(resultArray);\n\n\tif ((resultArray.length === 0) | (resultArray.length < 12 ))\n\t  loadMore.classList.add('hidden');\n}\n\n\nfunction onModalOpen(event) {\n\tif (event.target.nodeName === \"IMG\") {\n\t  lightbox.classList.add(\"is-open\");\n\t}\n\twindow.addEventListener(\"keydown\", onModalCloseByEsc);\n  }\n  \nfunction copyGalleryAttributesToLightbox(event) {\n\tconst imageSrc = event.target.getAttribute(\"src\");\n\t// const imageAlt = event.target.getAttribute(\"alt\");\n\tlightboxImage.setAttribute(\"src\", imageSrc);\n\t// lightboxImage.setAttribute(\"alt\", imageAlt);\n  }\n  \nfunction setLightboxAttributesByIndex(index) {\n\tconst imageSrc = images[index].original;\n\tconst imageAlt = images[index].description;\n\tlightboxImage.setAttribute(\"src\", imageSrc);\n\t// lightboxImage.setAttribute(\"alt\", imageAlt);\n  }\n\nfunction closeModal() {\n\twindow.removeEventListener(\"keydown\", onModalCloseByEsc);\n\tlightbox.classList.remove(\"is-open\");\n\tlightboxImage.removeAttribute(\"src\");\n\tlightboxImage.removeAttribute(\"alt\");\n  }\n  \n  \nfunction onModalCloseByEsc(event) {\n\tif (event.code === \"Escape\") {\n\t  closeModal();\n\t}\n  }\n\n\nfunction onModalClose(event) {\n\tif (event.target === lightboxOverlay || event.target === lightboxCloseBtn) {\n\t  closeModal();\n\t}\n  }"],"sourceRoot":""}